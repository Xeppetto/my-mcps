# Playwright MCP Server

AI 도구에 MCP로 연동하는 Playwright입니다.

대부분의 경우 AI 도구 자체로도 웹 검색은 충분하지만, 대부분의 AI는 web_search와 web_fetch에 특화되어 있습니다. Playright는 실제 브라우저를 가장하여 서버에 접속하기 때문에 그 외 기능들을 사용할 수 있습니다. 그러므로, 단순 검색과 내용 추출이라면 LLM 도구 자체로도 충분하지만, 웹사이트와 상호작용하기 위해서는 Playright를 사용합니다.

<br>

## 활용 방법

1. JavaScript로 렌더링되는 동적 컨텐츠의 확인

   > {URI 정보}에 배치된 SPA의 개수를 알려주고, 주요 컨텐츠들을 요약해주세요.

   > {URI 정보}에서 로딩되는 SPA를 확인하기 위해 3회 브라우저 refresh 후 내용들을 취합해주고, 주요 내용을 요약해주세요.

2. Form 자동 작성 및 제출

   > {URI 정보}의 설문조사 양식을 작성하고 제출해주세요.

   > {URI 정보}의 회원 가입 페이지에서 사용자의 입력 및 선택에 대한 validation logic을 테스트 후 보완 사항을 제안해 주세요.

3. E2E 테스트 시나리오

   > {테스트 계정 정보 - ID와 PW 제공}를 가지고, 로그인 → 상품검색 → 장바구니에 담기까지 플로우를 테스트 해 주세요.

   > React로 작성한 {URI 정보} 페이지에 접속해서 사용자 단에서 JavaScript 오류가 있는 지 확인해 주세요.

   > {URI 정보}의 브라우저 별 로딩 시간 체크해주세요.

4. UI 테스트

   > 다크모드로 변경했을 때 웹페이지의 레이아웃이 깨지는 부분이 있는지 확인 후 알려주세요.

   > {URI 정보} 페이지의 스크린샷을 찍어서 {local PC directory} 위치에 저장해 주세요.

   > {URI 정보}에 나타나는 {버튼 이름}의 버튼을 5초 간격으로 3회 클릭 후 나타나는 메시지를 각각 알려주세요.

5. 데이터 수집

   > {URI 정보} 내에서 AI와 관련된 모든 채용 포지션을 찾아서 알려주세요.

   > {URI 정보}에 접속해서 가격 정책 페이지를 {local PC directory} 위치에 스크린샷으로 저장해주고, 해당 제품의 주요 특징을 요약해서 알려주세요.

<br>

## 주의사항

- AI에게 로그인 정보를 주면 로그인 후 하는 활동들을 수행할 수 있으나, LLM에 개인정보를 제출하는 건 권장하지 않음.
- 로그인이 필요한 활동의 경우는 별도로 Playwright app을 개발하여 사용하기를 권장함.
- MCP는 local PC에서 작동하는 방식이므로, Playwright MCP를 활용하여 테스트 가능함.

  > localhost:3000에 접속해서 회원가입 링크를 클릭 후 {local PC directory} 위치에 스크린샷을 저장해 주세요.

  > React로 생성한 {localhost:5173}이 모바일에서 어떻게 보이는지 {local PC directory} 위치에 스크린샷을 저장해 주세요.

  > localhost:4200에 접속해서 DOM 구조를 분석해서 알려주세요.

<br>

## 설치 및 확인

1. git clone하여 로컬 repo 확보

2. 설치 후 실행 확인

   ```node
   node dist/index.js
   ```

   > Playwright MCP server running on stdio 라고 표시되면 정상 실행

3. LLM 도구에서 MCP 연동 확인 요청 (환경에 따라 다름)<br>
   (1) Windows WSL의 경우
   ```bash
   "playwright": {
     "command": "wsl",
     "args": ["bash", "-c", "cd/mnt/{installed directory} && node dist/index.js"]
   }
   ```
   (2) MAC OS의 경우
   ```bash
   TBD
   ```
4. AI 도구에서 "Playwright MCP 연동 확인해주세요." 입력하여 연동 확인

5. 추가 : 브라우저가 설치되어 있지 않은 경우

   ```bash
   npx playwright install
   ```

   혹은

   ```bash
   npx playwright install chromium
   ```

<br>

## Playwright MCP의 주요 기능

Playwright MCP 서버는 다음 기능들을 제공합니다. 아래는 개발자들을 위한 정보이므로, 상세한 API 별 파라미터들의 사용 사례에 대해 알고 싶으신 경우 확인해 주세요.

#### 1. `launch_browser`

**(1) 개요 :** Chromium, Firefox, 또는 WebKit 브라우저를 실행합니다.

**(2) 파라미터:**

- `browser` (필수): 실행할 브라우저 타입 - `chromium`, `firefox`, `webkit`
- `headless` (선택): 헤드리스 모드 실행 여부 (기본값: true)
- `browser_id` (선택): 브라우저 인스턴스 고유 식별자 (기본값: "default")

**(3) 반환 정보:** 브라우저 실행 성공 메시지 및 ID

**(4) 사용 사례:**

- 웹 스크래핑 작업 시작
- 웹 애플리케이션 테스트 준비
- 여러 브라우저 인스턴스 동시 관리

#### 2. `new_page`

**(1) 개요 :** 브라우저에 새 페이지(탭)를 생성합니다.

**(2) 파라미터:**

- `browser_id` (선택): 대상 브라우저 인스턴스 ID (기본값: "default")
- `page_id` (선택): 페이지 고유 식별자 (기본값: "default")

**(3) 반환 정보:** 페이지 생성 성공 메시지 및 ID

**(4) 사용 사례:**

- 여러 웹 페이지 동시 탐색
- 병렬 작업 수행
- 각 작업별 독립된 세션 관리

#### 3. `navigate`

**(1) 개요 :** 지정된 URL로 페이지를 이동합니다.

**(2) 파라미터:**

- `url` (필수): 이동할 URL
- `page_id` (선택): 대상 페이지 ID (기본값: "default")

**(3) 반환 정보:** 페이지 이동 성공 메시지

**(4) 사용 사례:**

- 특정 웹사이트 접속
- 웹 애플리케이션 탐색
- 여러 페이지 순차 방문

#### 4. `click`

**(1) 개요 :** 페이지 내 특정 요소를 클릭합니다.

**(2) 파라미터:**

- `selector` (필수): CSS 셀렉터 또는 텍스트
- `page_id` (선택): 대상 페이지 ID (기본값: "default")

**(3) 반환 정보:** 클릭 성공 메시지

**(4) 사용 사례:**

- 버튼 클릭
- 링크 선택
- 폼 제출
- UI 요소 상호작용

#### 5. `type`

**(1) 개요 :** 특정 입력 요소에 텍스트를 입력합니다.

**(2) 파라미터:**

- `selector` (필수): 입력 요소의 CSS 셀렉터
- `text` (필수): 입력할 텍스트
- `page_id` (선택): 대상 페이지 ID (기본값: "default")

**(3) 반환 정보:** 텍스트 입력 성공 메시지

**(4) 사용 사례:**

- 폼 작성
- 검색어 입력
- 로그인 정보 입력
- 텍스트 필드 자동화

#### 6. `get_text`

**(1) 개요 :** 특정 요소에서 텍스트 콘텐츠를 가져옵니다.

**(2) 파라미터:**

- `selector` (필수): 대상 요소의 CSS 셀렉터
- `page_id` (선택): 대상 페이지 ID (기본값: "default")

**(3) 반환 정보:** 추출된 텍스트 내용

**(4) 사용 사례:**

- 웹 페이지 데이터 추출
- 동적 콘텐츠 수집
- 검증용 텍스트 확인
- 스크래핑 작업

#### 7. `screenshot`

**(1) 개요 :** 현재 페이지의 스크린샷을 저장합니다.

**(2) 파라미터:**

- `path` (필수): 스크린샷 저장 경로
- `page_id` (선택): 대상 페이지 ID (기본값: "default")

**(3) 반환 정보:** 스크린샷 저장 성공 메시지 및 경로

**(4) 사용 사례:**

- 페이지 상태 기록
- 시각적 테스트
- 버그 리포트용 증거 수집
- 웹 페이지 아카이빙

#### 8. `wait_for_selector`

**(1) 개요 :** 특정 요소가 나타날 때까지 대기합니다.

**(2) 파라미터:**

- `selector` (필수): 대기할 요소의 CSS 셀렉터
- `timeout` (선택): 타임아웃 시간(밀리초) (기본값: 30000)
- `page_id` (선택): 대상 페이지 ID (기본값: "default")

**(3) 반환 정보:** 요소 출현 성공 메시지

**(4) 사용 사례:**

- 동적 콘텐츠 로딩 대기
- AJAX 요청 완료 대기
- SPA(Single Page Application) 탐색
- 느린 페이지 로딩 처리

#### 9. `close_browser`

**(1) 개요 :** 브라우저 인스턴스를 종료합니다.

**(2) 파라미터:** `browser_id` (선택): 종료할 브라우저 인스턴스 ID (기본값: "default")

**(3) 반환 정보:** 브라우저 종료 성공 메시지

**(4) 사용 사례:**

- 작업 완료 후 리소스 정리
- 자동화 스크립트 종료
- 메모리 절약

## 지원 브라우저

- **Chromium**: Google Chrome 기반 브라우저
- **Firefox**: Mozilla Firefox
- **WebKit**: Safari 기반 브라우저
